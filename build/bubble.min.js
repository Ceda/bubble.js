!function(e,t){"function"==typeof define&&define.amd?define([],t):t()}(this,function(){bubble=function(e,t){var n,r,o,u={},a=document,c={},i=[],f=t||{blur:!0,change:!0,click:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,focus:!0,fullscreenchange:!0,input:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,readystatechange:!0,resize:!0,scroll:!0,touchcancel:!0,touchend:!0,touchenter:!0,touchleave:!0,touchmove:!0,touchstart:!0,transitionend:!0,load:!0,unload:!0},l="querySelector",s="querySelectorAll",d="data-bubble-action",h="getAttribute",g=function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,"focus"===t||"blur"===t),!0):e.attachEvent?e.attachEvent("on"+t,n):void 0},v=function(e){var t,n,r=e?e.split(/, ?/g):[],o=[];for(n=0;n<r.length;n++)t=r[n].split(/:/),o.push(t.length>1?{type:t[0].trim(),event:t[1]}:{type:"click",event:t[0]});return o},p=function(e,t){var r,o=[];for(e&&e.target&&e.target[h]&&e.target[h](d)?o=v(e.target[h](d)):n[h](d)&&(o=v(n[h](d))),r=0;r<o.length;r++)o[r].type===t&&o[r].event&&(e.stopPropagation(),u.dispatch(o[r].event,e))};if(u.root=n=a&&a[l]?a[l](e):!1,u.on=function(e,t){return"object"==typeof e?(i.push(e),u):(c[e]||(c[e]=[]),c[e].push(t),u)},u.off=function(e,t){if(c[e])for(var n=0;n<c[e].length;n++)if(c[e][n]===t)return c[e].splice(n,1),u;return u},u.dispatch=function(e,t){var n;if(c[e])for(n=0;n<c[e].length;n++)c[e][n](t);if(i.length>0)for(n=0;n<i.length;n++)i[n][e]&&i[n][e](t);return u},n){u.nodes=o=n[s]("["+d+"]");var m=function(e){for(var t=v(e[h](d)),n=0;n<t.length;n++)f[t[n].type]=!0};for(m(n),r=0;r<o.length;r++)m(o[r]);for(var y in f)!function(e){g(n,e,function(t){p(t,e)})}(y);return u}return!1}});