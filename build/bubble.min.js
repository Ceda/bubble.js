!function(t,e){"function"==typeof define&&define.amd?define([],e):e()}(this,function(){bubble=function(t){var e,n,r,o={},i={},f=document,u={},a=[],c="querySelector",l="querySelectorAll",h="data-bubble-action",v="getAttribute",g=function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,"focus"===e||"blur"===e),!0):t.attachEvent?t.attachEvent("on"+e,n):void 0},p=function(t){var e,n,r=t?t.split(/, ?/g):[],o=[];for(n=0;n<r.length;n++)e=r[n].split(/:/),o.push(e.length>1?{type:e[0].trim(),event:e[1]}:{type:"click",event:e[0]});return o},d=function(t,n){var r,i=[];for(t&&t.target&&t.target[v]&&t.target[v](h)?i=p(t.target[v](h)):e[v](h)&&(i=p(e[v](h))),r=0;r<i.length;r++)i[r].type===n&&i[r].event&&(t.stopPropagation(),o.dispatch(i[r].event,t))};if(o.root=e=f&&f[c]?f[c](t):!1,o.on=function(t,e){return"object"==typeof t?(a.push(t),o):(u[t]||(u[t]=[]),u[t].push(e),o)},o.off=function(t,e){if(u[t])for(var n=0;n<u[t].length;n++)if(u[t][n]===e)return u[t].splice(n,1),o;return o},o.dispatch=function(t,e){var n;if(u[t])for(n=0;n<u[t].length;n++)u[t][n](e);if(a.length>0)for(n=0;n<a.length;n++)a[n][t]&&a[n][t](e);return o},e){o.nodes=r=e[l]("["+h+"]");var s=function(t){for(var e=p(t[v](h)),n=0;n<e.length;n++)i[e[n].type]=!0};for(s(e),n=0;n<r.length;n++)s(r[n]);for(var b in i)!function(t){g(e,t,function(e){d(e,t)})}(b);return o}return!1}});